import{r,R as G}from"./react-CJP9YpS5.js";import{R as J}from"./react-dom-Z-DTtB-p.js";import{m as X,D as V,a as j,R as q,u as Q,N as B,b as Z,c as $,d as H,e as ee,f as te,g as ne}from"./react-router-dDZo5ENU.js";import{b as re,d as ie,E as oe,s as M,e as D,i as z}from"./@remix-run-Ydvm1cYx.js";/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x.apply(this,arguments)}function se(e,t){if(e==null)return{};var n={},o=Object.keys(e),i,a;for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function le(e,t){return e.button===0&&(!t||t==="_self")&&!ae(e)}const ue=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function ke(e,t){return re({basename:t==null?void 0:t.basename,future:x({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:ie({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||ce(),routes:e,mapRouteProperties:X,window:t==null?void 0:t.window}).initialize()}function ce(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=x({},t,{errors:fe(t.errors)})),t}function fe(e){if(!e)return null;let t=Object.entries(e),n={};for(let[o,i]of t)if(i&&i.__type==="RouteErrorResponse")n[o]=new oe(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let u=new a(i.message);u.stack="",n[o]=u}catch{}}if(n[o]==null){let a=new Error(i.message);a.stack="",n[o]=a}}else n[o]=i;return n}const de=r.createContext({isTransitioning:!1}),ve=r.createContext(new Map),he="startTransition",F=G[he],we="flushSync",N=J[we];function pe(e){F?F(e):e()}function _(e){N?N(e):e()}class me{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",n(o))}})}}function Oe(e){let{fallbackElement:t,router:n,future:o}=e,[i,a]=r.useState(n.state),[u,f]=r.useState(),[d,l]=r.useState({isTransitioning:!1}),[s,h]=r.useState(),[v,m]=r.useState(),[y,C]=r.useState(),E=r.useRef(new Map),{v7_startTransition:P}=o||{},L=r.useCallback(c=>{P?pe(c):c()},[P]),w=r.useCallback((c,R)=>{let{deletedFetchers:p,unstable_flushSync:I,unstable_viewTransitionOpts:g}=R;p.forEach(T=>E.current.delete(T)),c.fetchers.forEach((T,Y)=>{T.data!==void 0&&E.current.set(Y,T.data)});let W=n.window==null||typeof n.window.document.startViewTransition!="function";if(!g||W){I?_(()=>a(c)):L(()=>a(c));return}if(I){_(()=>{v&&(s&&s.resolve(),v.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:g.currentLocation,nextLocation:g.nextLocation})});let T=n.window.document.startViewTransition(()=>{_(()=>a(c))});T.finished.finally(()=>{_(()=>{h(void 0),m(void 0),f(void 0),l({isTransitioning:!1})})}),_(()=>m(T));return}v?(s&&s.resolve(),v.skipTransition(),C({state:c,currentLocation:g.currentLocation,nextLocation:g.nextLocation})):(f(c),l({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}))},[n.window,v,s,E,L]);r.useLayoutEffect(()=>n.subscribe(w),[n,w]),r.useEffect(()=>{d.isTransitioning&&!d.flushSync&&h(new me)},[d]),r.useEffect(()=>{if(s&&u&&n.window){let c=u,R=s.promise,p=n.window.document.startViewTransition(async()=>{L(()=>a(c)),await R});p.finished.finally(()=>{h(void 0),m(void 0),f(void 0),l({isTransitioning:!1})}),m(p)}},[L,u,s,n.window]),r.useEffect(()=>{s&&u&&i.location.key===u.location.key&&s.resolve()},[s,v,i.location,u]),r.useEffect(()=>{!d.isTransitioning&&y&&(f(y.state),l({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),C(void 0))},[d.isTransitioning,y]),r.useEffect(()=>{},[]);let S=r.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:c=>n.navigate(c),push:(c,R,p)=>n.navigate(c,{state:R,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(c,R,p)=>n.navigate(c,{replace:!0,state:R,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[n]),b=n.basename||"/",A=r.useMemo(()=>({router:n,navigator:S,static:!1,basename:b}),[n,S,b]);return r.createElement(r.Fragment,null,r.createElement(V.Provider,{value:A},r.createElement(j.Provider,{value:i},r.createElement(ve.Provider,{value:E.current},r.createElement(de.Provider,{value:d},r.createElement(q,{basename:b,location:i.location,navigationType:i.historyAction,navigator:S,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?r.createElement(ye,{routes:n.routes,future:n.future,state:i}):t))))),null)}function ye(e){let{routes:t,future:n,state:o}=e;return Q(t,void 0,o,n)}const Se=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=r.forwardRef(function(t,n){let{onClick:o,relative:i,reloadDocument:a,replace:u,state:f,target:d,to:l,preventScrollReset:s,unstable_viewTransition:h}=t,v=se(t,ue),{basename:m}=r.useContext(B),y,C=!1;if(typeof l=="string"&&Re.test(l)&&(y=l,Se))try{let w=new URL(window.location.href),S=l.startsWith("//")?new URL(w.protocol+l):new URL(l),b=M(S.pathname,m);S.origin===w.origin&&b!=null?l=b+S.search+S.hash:C=!0}catch{}let E=Z(l,{relative:i}),P=Ee(l,{replace:u,state:f,target:d,preventScrollReset:s,relative:i,unstable_viewTransition:h});function L(w){o&&o(w),w.defaultPrevented||P(w)}return r.createElement("a",x({},v,{href:y||E,onClick:C||a?o:L,ref:n,target:d}))});function Ie(e){let{getKey:t,storageKey:n}=e;return Le({getKey:t,storageKey:n}),null}var O;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(O||(O={}));var U;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(U||(U={}));function ge(e){let t=r.useContext(V);return t||z(!1),t}function Te(e){let t=r.useContext(j);return t||z(!1),t}function Ee(e,t){let{target:n,replace:o,state:i,preventScrollReset:a,relative:u,unstable_viewTransition:f}=t===void 0?{}:t,d=$(),l=H(),s=ee(e,{relative:u});return r.useCallback(h=>{if(le(h,n)){h.preventDefault();let v=o!==void 0?o:D(l)===D(s);d(e,{replace:v,state:i,preventScrollReset:a,relative:u,unstable_viewTransition:f})}},[l,d,s,o,i,n,e,a,u,f])}const K="react-router-scroll-positions";let k={};function Le(e){let{getKey:t,storageKey:n}=e===void 0?{}:e,{router:o}=ge(O.UseScrollRestoration),{restoreScrollPosition:i,preventScrollReset:a}=Te(U.UseScrollRestoration),{basename:u}=r.useContext(B),f=H(),d=te(),l=ne();r.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),be(r.useCallback(()=>{if(l.state==="idle"){let s=(t?t(f,d):null)||f.key;k[s]=window.scrollY}try{sessionStorage.setItem(n||K,JSON.stringify(k))}catch{}window.history.scrollRestoration="auto"},[n,t,l.state,f,d])),typeof document<"u"&&(r.useLayoutEffect(()=>{try{let s=sessionStorage.getItem(n||K);s&&(k=JSON.parse(s))}catch{}},[n]),r.useLayoutEffect(()=>{let s=t&&u!=="/"?(v,m)=>t(x({},v,{pathname:M(v.pathname,u)||v.pathname}),m):t,h=o==null?void 0:o.enableScrollRestoration(k,()=>window.scrollY,s);return()=>h&&h()},[o,u,t]),r.useLayoutEffect(()=>{if(i!==!1){if(typeof i=="number"){window.scrollTo(0,i);return}if(f.hash){let s=document.getElementById(decodeURIComponent(f.hash.slice(1)));if(s){s.scrollIntoView();return}}a!==!0&&window.scrollTo(0,0)}},[f,i,a]))}function be(e,t){let{capture:n}=t||{};r.useEffect(()=>{let o=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",e,o),()=>{window.removeEventListener("pagehide",e,o)}},[e,n])}export{Ue as L,Oe as R,Ie as S,ke as c};
